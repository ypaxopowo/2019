<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8" />
<title></title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, max-age=0, must-revalidate">
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="0" />


<meta property="og:title" content="標題"/>
<meta property="og:description" content="描述"/>
<meta property="og:image" content="https://i.imgur.com/ql6mO8W.png"/>
 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<style>
body{}
</style>

<script>
document.addEventListener("DOMContentLoaded",function(e){
	console.log( "DOMContentLoaded" );
	var bb=document.querySelector("body");
	var str=`
2019.01.25
  `;
	bb.insertAdjacentHTML('beforeend', '<h1>'+str+'</h1>');
	document.title=str;
	console.log(bb);
});

document.addEventListener("readystatechange",function(e){
	console.log( "readystatechange" );
	//console.log( e );
	//console.log( document.readyState );
	if(document.readyState === "complete"){
		console.log( 'complete' );
		var bb=document.querySelector("h1");
		var str=`
		網路上收集的圖片
		遇到喜歡的會放在這邊
		`;
		bb.insertAdjacentHTML('afterend', '<pre>'+str+'</pre>');
	}
});

	

$(function(){});
$(()=>{
	console.log('jq');
	//
	$.gg=[];
	$.gg.cc=0;
	//
	//poi();
	poi2();
});

function poi2(){

var str=`
[HorribleSubs] Go-toubun no Hanayome - 03 [1080p].mkv_snapshot_02.32.536.jpg


`;
	str=str.split("\n");
	//typeof element
	str=str.filter(function(element){
		return (element.length>0);
	});
	str.forEach(function(element) {
		//console.log(element.length);
		poi(''+element);
	});

	//console.log(str);
	//poi();
}
function poi(input_var){
	//var img = new Image();
	var img = document.createElement('img')
	img.src = input_var;
	//img.setAttribute("crossOrigin",'Anonymous')
	//console.log( img.src );

	img.onload = function(e){
		//console.log(e);
		($.gg.cc++);
		console.log( $.gg.cc );
		var imgw=$(img).prop('naturalWidth');
		var imgh=$(img).prop('naturalHeight');
		console.log( imgw,imgh );//naturalHeight
		if(  imgw>0 && imgh>0  ){
			var c = document.createElement('canvas');
			var ctx = c.getContext('2d');
			c.width = 1280+2;
			c.height = 720+2;
			ctx.drawImage(img,0,0, c.width , c.height );//
			var img_new = c.toDataURL("image/jpeg");
			//console.log( img_new );
			var newimg = document.createElement('img');
			newimg.src=img_new;
			var bb=document.querySelector("body");
			bb.appendChild(newimg);
		}else{
			console.log('錯誤的wh');
			console.log(img.src);
			//throw 
		}//if
	};//img.onload
	img.onerror=function(e){
		console.log('img.onerror');
		//console.log(e);
		console.log(img.src);
	};//img.onerror

}//poi

</script>

</head>
<body>



</body>
</html>
